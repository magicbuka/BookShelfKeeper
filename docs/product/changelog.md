## [0.4.2] - 2025-12-27

### Fixed
- FR-10: Исправлен баг #6 на экране «Добавление книги» — форма теперь корректно скроллится, кнопка «Добавить книгу» не перекрывается клавиатурой, поддержан переход по полям через кнопку Next/Done на клавиатуре.


## [0.4.1] – 2025‑12‑23

### Changed
- Уточнено поведение автодополнения для поля «Шкаф / полка» (Location Level 2): при фокусе на поле и наличии сохранённых вариантов для выбранной комнаты автоматически раскрывается список подсказок.
- Ограничено количество отображаемых подсказок для Level 2 (шкаф/полка), чтобы выпадающий список оставался компактным и удобочитаемым даже при большом числе вариантов.

### Refactored
- Вынесено форматирование строки расположения книги (`Расположение: Комната / Шкаф`) в отдельную функцию, чтобы единообразно отображать путь расположения в каталоге и на экране деталей.


## [0.4.0] – 2025‑12‑23

### Added
- [MVP 0.4.0] На форме добавления и редактирования книги появилось дополнительное поле «Шкаф / полка» (Location Level 2); значение сохраняется в сущности книги как `locationLevel2` и является опциональным, обязательным остаётся только уровень «Комната» (Location Level 1).
- [MVP 0.4.0] При сохранении или редактировании книги строится иерархия расположения в таблице `locations`: Level 1 (комната) хранится как запись с `parentId = null`, при непустом Level 2 (шкаф/полка) создаётся или переиспользуется запись с `parentId`, указывающим на комнату, а в `locationId` книги сохраняется идентификатор наиболее глубокого уровня.
- [MVP 0.4.0] В каталоге и на экране деталей книги расположение отображается в формате `Расположение: <Комната>` или `Расположение: <Комната> / <Шкаф>`, если Level 2 заполнен; для уже существующих книг без Level 2 корректно показывается только комната.


## [0.3.1-fix] - 2025-12-21

### Fixed
- [#5] Исправлено падение приложения на физических устройствах при запуске из-за некорректной миграции Room (несоответствие схемы таблицы books).
  Временно отключены пользовательские миграции, включено пересоздание БД при несовпадении схемы.


## [0.3.1] - 2025-12-19

### Added
- FR-11.1: вынесен Level 1 локаций (комната) в отдельную таблицу locations с привязкой через Book.locationId.
- Автодополнение "Комната" в добавлении/редактировании книги теперь работает на основе справочника locations.

### Technical
- Обновлена схема Room: добавлена сущность Location, обновлён BookRepository и AddBook/BookDetails/Catalog ViewModel для использования LocationDao.
- При смене схемы БД для тестирования требуется предварительно удалить приложение (reinstall).


## [0.3.0] – 2025‑12‑18

### Added
- Реализован FR‑10: экран деталей книги с переходом из каталога.
- Режим редактирования существующей книги через форму добавления (предзаполненные поля).
- Возможность удаления книги из карточки с диалогом подтверждения.

### Changed
- Обновлена навигация приложения: добавлены маршруты для экрана деталей и редактирования книги.
- Улучшено поведение ввода для полей "Название" (BR#2) и "Язык"(BR#4) (капитализация и отображение выбранного языка).


## [0.2.0] - 2025-12-16

### Added
- Улучшенное автодополнение для поля «Язык» на экране добавления книги (FR-4.1):
  - используется справочник языков с autonyms и ISO 639‑1 кодами;
  - сначала отображаются ранее использованные языки, затем остальные;
  - формат подсказки «Имя (код)», поиск по имени и коду;
  - сохранение в БД только кода языка.

### Fixed
- Исправлена ошибка, из-за которой при уже выбранном языке повторное раскрытие списка языков не показывало варианты до изменения текста в поле (FR-4.1).
- Исправлено поведение при вставке текста длиной больше максимальной в поля формы книги: текст теперь обрезается до допустимой длины, а не отклоняется полностью (БР-1).

### Changed
- Уточнены подписи полей на форме добавления книги (FR-4):
  - поле `Language` переименовано в «Язык»;
  - поле «Комната *» переименовано в «Комната» (обязательность отражается через недоступность кнопки «Сохранить» при пустом значении).
- Уточнены текстовые формулировки требований FR-4 и FR-9;
- Улучшено поведение экранной клавиатуры для полей «Название» и «Автор(ы)» на экране добавления книги: теперь клавиатура автоматически делает первую букву каждого слова заглавной, что упрощает ввод названий книг и имён авторов.


## [0.1.0] – 2025‑12‑16

### Добавлено
- Экран добавления книги расширен полем `Language` — строковое поле с подсказками, значение хранится как двухбуквенный код языка (ISO 639‑1), например `ru`, `en`, `zh`;
- Фильтрация по языку на экране каталога:
  - над списком книг добавлен фильтр по языкам, основанный на фактически используемых в базе кодах;
  - по умолчанию активен режим «Все языки» (отображаются все книги);
  - при выборе конкретного языка в списке отображаются только книги с соответствующим значением поля `language`;
  - повторный выбор режима «Все языки» сбрасывает фильтр и возвращает полный список.
- Автодополнение для поля `Language`:
  - используется встроенный справочник языков ISO 639‑1;
  - подсказки строятся на основе справочника и ранее использованных значений из базы;
  - уже использованные пользователем языки отображаются в списке первыми;
  - формат подсказки: «Название языка (код)», например `Russian (ru)`;
  - выбранный язык выделяется иконкой галочки в выпадающем списке;
  - при сохранении книги в БД уходит только двухбуквенный код.
- Автодополнение для поля «Комната *»:
  - подсказки формируются из уникальных значений `locationLevel1` всех книг;
  - список подсказок фильтруется по введённому тексту;
  - выбранная комната подставляется в поле и сохраняется как `locationLevel1`.

### Исправлено
- Снижена вероятность опечаток и расхождений в значениях комнаты за счёт выбора из подсказок вместо постоянного ручного ввода.
